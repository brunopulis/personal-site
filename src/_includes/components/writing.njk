<section class="mb-8" aria-labelledby="posts-title">
  <header class="flex md:flex-row flex-col justify-between md:items-end gap-6 mb-16">
    <div>
      <h2 class="flex items-center gap-2 mb-6 font-semibold text-2xl" id="post-title">
        <span aria-hidden="true">✍️</span> Últimos artigos
      </h2>
      <p>Escrevo para organizar ideias, compartilhar aprendizados e questionar práticas comuns da web.</p>
    </div>
  </header>

  {% set posts = collections.posts | default([]) %}
  {% if (posts | length) == 0 %}
  {% set posts = collections.searchIndex | default([]) %}
  {% endif %}

  {% if posts | length > 0 %}
  <div class="space-y-4">
    {% for post in posts.slice(0, 3) %}
    {% set url = post.url %}
    {% set title = (post.data and post.data.title) or post.title %}
    {% set dateVal = post.data.pubDate %}
    {% set desc = (post.data and post.data.description) or post.description or (post.templateContent | default('') |
    striptags | truncate(160)) %}
    {% set tags = (post.data and post.data.tags) or post.tags or [] %}
    <article class="pb-6 border-brand-gray-500 border-b last:border-b-0 h-entry">
      <h3 class="mb-2 p-name font-semibold text-xl">
        <a href="{{ post.url }}" class="hover:text-brand-blue-500 transition-colors u-url">
          {{ title }}
        </a>
      </h3>

      {% if dateVal %}
      <time class="block mb-3 text-sm dt-published" datetime="{{ dateVal | toISOString }}">
        {{ dateVal | readableDate }}
      </time>
      {% endif %}

      {% if desc %}
      <p class="mb-3 p-summary leading-relaxed">{{ desc }}</p>
      {% endif %}
      {% if tags %}
      <div class="flex flex-wrap gap-2">
        {% for tag in tags %}
        <a class="hover:opacity-80 p-category px-2 py-1 rounded text-white text-xs transition-opacity"
          style="--tag-bg: {{ tag | tagColor }}; background-color: var(--tag-bg);"
          href="/tags/{{ tag | slugifyString }}/">#{{ tag }}</a>
        {% endfor %}
      </div>
      {% endif %}
    </article>
    {% endfor %}
  </div>
  {% endif %}

  <div class="mt-6">
    <a href="/blog" class="inline-flex items-center gap-2">
      ver todos os artigos {% lucide "chevron-right", { class: "w-4 h-4" } %}
    </a>
  </div>
</section>