---
import { getCollection } from 'astro:content'
import { Image } from 'astro:assets'

// Importar imagem de fallback
import fallbackImage from '@/assets/images/fallback.webp'

// Buscar posts da collection
const allPosts = await getCollection('blog')

// Ordenar por data mais recente e limitar a 3 posts
const posts = allPosts
	.sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime())
	.slice(0, 3)
---

<section class="section py-16">
	<div class="container mx-auto py-8">
		<div class="grid grid-cols-1 gap-16 lg:grid-cols-2">
			<!-- Left Section - Title and CTA -->
			<div class="space-y-8">
				<div class="space-y-2">
					<p class="text-sm font-bold text-[22px] mb-4 text-black">Textos</p>
					<h2 class="text-4xl font-bold leading-tight text-gray-900 lg:text-5xl">
						Confira meus últimos<br />
						artigos e tutoriais
					</h2>
				</div>

				<a
					href="/blog"
					class="group inline-flex items-center font-medium text-gray-900 transition-colors hover:text-gray-700"
				>
					<span class="border-b-2 border-gray-900 pb-1 group-hover:border-gray-700"
						>Veja todos os textos</span
					>
					<svg
						class="ml-2 h-4 w-4 transition-transform group-hover:translate-x-1"
						fill="none"
						stroke="currentColor"
						viewBox="0 0 24 24"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="2"
							d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
					</svg>
				</a>
			</div>

			<!-- Right Section - Articles List -->
			<div class="space-y-8">
				<!-- Article 1 -->
				<article class="space-y-3 border-b border-gray-200 pb-8">
					<div class="flex items-center space-x-2 text-sm text-gray-500">
						<time>18 de março de 2025</time>
						<span>/</span>
						<span>Artigos</span>
					</div>
					<h2
						class="cursor-pointer text-2xl font-bold text-gray-900 transition-colors hover:text-gray-700 lg:text-3xl"
					>
						Uma doença chamada conteúdo curto
					</h2>
				</article>

				<!-- Article 2 -->
				<article class="space-y-3 border-b border-gray-200 pb-8">
					<div class="flex items-center space-x-2 text-sm text-gray-500">
						<time>18 de março de 2025</time>
						<span>/</span>
						<span>Artigos</span>
					</div>
					<h2
						class="cursor-pointer text-2xl font-bold text-gray-900 transition-colors hover:text-gray-700 lg:text-3xl"
					>
						Compartilhando post no Mastodon
					</h2>
				</article>

				<!-- Article 3 -->
				<article class="space-y-3 pb-8">
					<div class="flex items-center space-x-2 text-sm text-gray-500">
						<time>18 de março de 2025</time>
						<span>/</span>
						<span>Artigos</span>
					</div>
					<h2
						class="cursor-pointer text-2xl font-bold text-gray-900 transition-colors hover:text-gray-700 lg:text-3xl"
					>
						5 tags que ajudam na acessibilidade
					</h2>
				</article>
			</div>
		</div>
		<!-- <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
			{
				posts.map((post, index) => (
					<div
						class="card slide-up overflow-hidden border border-gray-200 dark:border-gray-700"
						style={`animation-delay: ${index * 100}ms`}
					>
						<a href={`/blog/${post.id}`} class="block">
							<Image
								src={post.data.coverImage || fallbackImage}
								alt={post.data.title || ''}
								class="h-48 w-full object-cover"
								width={800}
								height={400}
								loading="lazy"
							/>
						</a>
						<div class="p-6">
							<div class="mb-4 flex items-center">
								<span class="text-sm font-medium text-primary-600 dark:text-primary-400">
									{post.data.category}
								</span>
								<span class="mx-2 text-gray-300 dark:text-gray-600">•</span>
								<time class="text-sm text-gray-500 dark:text-gray-400">
									{new Date(post.data.date).toLocaleDateString('pt-BR', {
										year: 'numeric',
										month: 'long',
										day: 'numeric'
									})}
								</time>
							</div>
							<a href={`/blog/${post.id}`} class="mb-3 block">
								<h2 class="text-xl font-semibold text-gray-900 transition-colors hover:text-primary-600 dark:text-white dark:hover:text-primary-400">
									{post.data.title}
								</h2>
							</a>
							<p class="mb-6 text-gray-600 dark:text-gray-300">{post.data.excerpt}</p>
						</div>
					</div>
				))
			}
		</div> -->
	</div>
</section>
